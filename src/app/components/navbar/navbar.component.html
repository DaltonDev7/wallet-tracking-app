<nav class="border-b bg-white">
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-14 items-center justify-between">

      <!-- Logo -->
      <div class="flex items-center gap-2 cursor-pointer" routerLink="/">
        <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-slate-900 text-xs font-semibold text-white">
          WT
        </div>
        <span class="text-lg font-semibold tracking-tight">Wallet Tracking</span>
      </div>

      <!-- Links desktop -->
      <div class="hidden items-center gap-6 text-sm md:flex">
        <a routerLink="/" routerLinkActive="text-slate-900 font-medium"
          class="text-slate-500 hover:text-slate-900 transition-colors">
          Inicio
        </a>

        <a routerLink="/categories" routerLinkActive="text-slate-900 font-medium"
          class="text-slate-500 hover:text-slate-900 transition-colors">
          Categorías
        </a>

        <a routerLink="/income" routerLinkActive="text-slate-900 font-medium"
          class="text-slate-500 hover:text-slate-900 transition-colors">
          Ingresos
        </a>


        <a routerLink="/expenses" routerLinkActive="text-slate-900 font-medium"
          class="text-slate-500 hover:text-slate-900 transition-colors">
          Gastos
        </a>
      </div>

      <!-- User menu -->
      <div class="hidden md:flex items-center gap-3 relative" #userMenu>

        <!-- Avatar + nombre -->
        <button (click)="toggleUserMenu()"
          class="flex items-center gap-2 rounded-full border border-slate-200 px-2 py-1.5 hover:bg-slate-50 transition">
          <!-- Si el usuario tiene foto de Google -->
          @if (user()?.photoURL) {
          <img [src]="user()?.photoURL" class="h-7 w-7 rounded-full object-cover" alt="User avatar" />
          } @else {
          <!-- Si NO tiene foto: avatar con inicial -->
          <div
            class="flex h-7 w-7 items-center justify-center rounded-full bg-slate-200 text-xs font-semibold text-slate-700">
            {{ user()?.displayName ? user()?.displayName![0].toUpperCase() : 'U' }}
          </div>
          }

          <!-- Nombre del usuario -->
          <span class="text-sm font-medium text-slate-700">
            {{ user()?.displayName || 'Usuario' }}
          </span>
        </button>



        <!-- Dropdown menu -->
        @if (isUserMenuOpen()) {
        <div class="absolute right-0 top-11 w-44 rounded-lg border border-slate-200 bg-white shadow-md py-2">
          <button class="w-full text-left px-3 py-2 text-sm text-slate-700 hover:bg-slate-50" type="button">
            Mi perfil
          </button>

          <button class="w-full text-left px-3 py-2 text-sm text-slate-700 hover:bg-slate-50" type="button">
            Configuración
          </button>

          <button (click)="onLogout()" class="w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50"
            type="button">
            Cerrar sesión
          </button>
        </div>
        }
      </div>

      <!-- Mobile menu button -->
      <button (click)="toggleMenu()"
        class="inline-flex items-center justify-center rounded-md border border-slate-200 p-2 md:hidden">
        <div class="space-y-1">
          <span class="block h-[2px] w-5 bg-slate-800"></span>
          <span class="block h-[2px] w-5 bg-slate-800"></span>
        </div>
      </button>
    </div>
  </div>

  <!-- Mobile menu -->
  @if (isMenuOpen()) {
  <div class="border-t bg-white md:hidden px-4 py-3 space-y-1 text-sm">
    <a routerLink="/" class="block py-1.5 text-slate-700">Inicio</a>
    <a routerLink="/categorias" class="block py-1.5 text-slate-700">Categorías</a>

    <!-- Usuario + logout -->
    <div class="mt-3 flex items-center gap-2">
      <img [src]="user()?.photoURL || 'assets/default-avatar.png'" class="h-7 w-7 rounded-full object-cover" />
      <span class="text-sm font-medium text-slate-700">
        {{ user()?.displayName || 'Usuario' }}
      </span>
    </div>

    <button (click)="onLogout()"
      class="mt-3 w-full rounded-lg border border-slate-200 px-3 py-1.5 text-left text-sm font-medium text-slate-700"
      type="button">
      Cerrar sesión
    </button>
  </div>
  }
</nav>